---
title: "Filtering and Joining"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Filtering}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: console
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
fansi::set_knit_hooks(knitr::knit_hooks)
options(crayon.enabled = TRUE, width = 75, cli.width = 75)

knit_print.grViz <- function(x, ...) {
  x %>% 
    DiagrammeRsvg::export_svg() %>% 
    c("`````{=html}\n", ., "\n`````\n") %>% 
    knitr::asis_output()
}
```


FIXME: 
This vignette is not yet written, but will be available in a future update.

Relevant functions for filtering `dm` objects:

- `cdm_filter()`
- `cdm_semi_join()`
- `cdm_nrow()`

```{r}
library(dm)
library(dplyr)
dm_pq <-
  cdm_nycflights13() %>%
  cdm_select_tbl(-planes, all_connected = FALSE) %>%
  cdm_filter(flights, month == 1) %>%
  cdm_copy_to(src_postgres(), ., temporary = FALSE)

dm_from_pq <-
  cdm_learn_from_db(src_postgres())

```

